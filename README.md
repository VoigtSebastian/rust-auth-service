# rust-auth-service

The rust-auth-service is an authentication and authorization service written in Rust as part of the Programming in Rust lecture at the HTWG Konstanz.
In addition to a library that provides the auth functionality, it implements an example actix-web server and web-frontend.

## Goals

1. Get a basic understanding of Rust, its features and write some Rust-idiomatic code
2. Get an idea of what it takes to write a reasonably secure auth service
3. Document and test our code

## How to

To use the example implementation of this service, you should have a working docker (or podman) installation on your system, otherwise the automation-script will need some minor changes.

To run the database execute the command `./automation.sh container start` after the container is running, execute `./automation.sh db up` to create the database-schema for this database.

Before running the service you have to create a certificate by running `./automation.sh gencert`.
This command will run `openssl` and create the files `cert.pem`and `key.pem`.

After starting the database and creating its schema, you can execute `cargo build --workspace` and `cargo run` to run the service with its default values.
The default values are part of the `.env` file which includes the database URI, which is generated by running `./automation.sh psql-uri` and the logging level.

To access the web-interface, visit `http://localhost:8080/index.html`.

### For the lazy ones

1. `./automation.sh container start`
2. `./automation.sh db up`
3. `./automation gencert`
4. `cargo build --workspace`
5. `cargo run`

## Security

### Considerations

This is written by two students, the service **hasn't been audited** and is meant as a study-exercise with room to expand.
There are most likely multiple security issues that we just don't know about or haven't found yet.

If are interested in giving feedback or found an issue with the implementation, please open an issue and let us know ❤️

Additionally:

1. **The default values in `.env` and `automation.sh`** are not meant for production
2. The service is **not meant for production**
3. SQLx — our SQL library — does not support 1:n mapping. This might be a security issue in our User implementation, as we need two queries to access a user and their capabilities.

## Build the documentation

To build and open the documentation of this workspace, without building the documentation of every crate it depends on, run `./automation doc`.
This is meant as a developer documentation, as it includes private items by using the `--document-private-items` flag.

The command that is executed by running `./automation doc` is `cargo doc --workspace --no-deps --document-private-items --open`.

## CI

Every time a pull-requests gets opened for this repository an automatic GitHub-Action is run that executes all tests in the cargo-workspace, including the tests that use the PostgreSQL database.

## Development

This software has been written be [Benjamin Faller](https://github.com/b-faller) and [Sebastian Voigt](https://github.com/VoigtSebastian).

## LICENSE

This project is, as most Rust projects are, licensed under the MIT License.
